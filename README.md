# üõí Customer Segmentation using RFM Analysis ‚Äì SuperStore Case Study

<img width="1121" height="643" alt="image" src="https://github.com/user-attachments/assets/85915f37-c102-44a0-99e1-fb6c598b5d56" />

## üìå Project Overview

This project focuses on performing customer segmentation using RFM analysis (Recency ‚Äì Frequency ‚Äì Monetary) for SuperStore, a global retail company. The main goal is to support the Marketing Department in designing personalized campaigns for different customer groups during the Christmas and New Year season.

In previous years, the marketing team segmented customers manually using Excel. However, with the increasing size of the customer base and sales data, they needed the Data Analysis Department to build an automated, scalable solution using Python and data science techniques.

## üéØ Objective

‚úîÔ∏è Apply RFM analysis to evaluate customer value.

‚úîÔ∏è Segment customers based on their RFM scores.

‚úîÔ∏è Support marketing and sales teams in planning targeted and effective promotional strategies.

## üß† Business Context

SuperStore is a global online retailer specializing in unique gift products. With a growing number of customers, especially wholesalers, the company aims to reward loyal customers and re-engage potentially valuable ones.

To do so, the Marketing team requested a customer segmentation model that groups customers based on their behavior throughout the year 2011. The segmentation results will be used to:

* Appreciate loyal customers

* Identify promising customers for upselling

* Re-engage inactive or at-risk customers

## üìà Who Is This Project For?

‚úîÔ∏è Marketing Teams ‚Äì To design personalized offers for each customer segment.

‚úîÔ∏è Business Analysts & Data Scientists ‚Äì To build and apply data-driven customer segmentation.

‚úîÔ∏è Executives ‚Äì To make informed decisions on customer engagement and lifetime value optimization.

## üîç Dataset Description

[**Link to dataset**](https://drive.google.com/drive/folders/1-Dhrd-__D244PINUga9lLeXVZHJDO-iK?usp=sharing)

This dataset contains transaction records between 01/12/2010 and 09/12/2011 from a UK-based online store.

| Column      | Description                                               |
| ----------- | --------------------------------------------------------- |
| InvoiceNo   | Unique invoice ID (prefixed with "C" for canceled orders) |
| StockCode   | Product code                                              |
| Description | Product name                                              |
| Quantity    | Number of items purchased                                 |
| InvoiceDate | Date and time of purchase                                 |
| UnitPrice   | Price per unit (in sterling)                              |
| CustomerID  | Unique customer ID                                        |
| Country     | Customer's country of residence                           |

## üß© Segment Mapping

| Segment            | RFM Scores |
| ------------------ | ------------------ |
| Champions          | 555, 554, 544, 545, 454, 455, 445 |
| Loyal              | 543, 444, 435, 355, 354, 345, 344, 335 |
| Potential Loyalist | 553, 551, 552, 541, 542, 533, 532, 531, 452, 451, 442, 441, 431, 453, 433, 432, 423, 353, 352, 351, 342, 341, 333, 323 |
| New Customers      | 512, 511, 422, 421, 412, 411, 311 |
| Promising          | 525, 524, 523, 522, 521, 515, 514, 513, 425,424, 413,414,415, 315, 314, 313 |
| Need Attention     | 535, 534, 443, 434, 343, 334, 325, 324 |
| About to Sleep     | 331, 321, 312, 221, 213, 231, 241, 251 |
| At Risk            | 255, 254, 245, 244, 253, 252, 243, 242, 235, 234, 225, 224, 153, 152, 145, 143, 142, 135, 134, 133, 125, 124 |
| Cannot Lose Them   | 155, 154, 144, 214,215,115, 114, 113 |
| Hibernating        | 332, 322, 233, 232, 223, 222, 132, 123, 122, 212, 211 |
| Lost Customers     | 111, 112, 121, 131,141,151 |

## üîß Methodology
<details>
<summary> <strong>Step 1: Data Preparation</strong></summary>

- Filter and clean the transaction data

- Remove canceled and null entries

- Group data by customer for analysis

</details>

<details>
<summary> <strong>Step 2: Calculate RFM Metrics</strong></summary>

- Recency (R): Days since the last purchase (reference date: 31/12/2011)

- Frequency (F): Total number of purchases

- Monetary (M): Total revenue generated by each customer

</details>

<details>
<summary> <strong>Step 3: Scoring RFM</strong></summary>

- Each metric is scored on a scale of 1 to 5, using quintile ranking

- Higher scores indicate more favorable behavior

</details>

<details>
<summary> <strong>Step 4: Segment Customers</strong></summary>

- Combine RFM scores into a 3-digit code (e.g., R=5, F=5, M=5 ‚Üí 555)

- Use predefined rules to assign customers into segments (e.g., "Champions", "Loyal", "At Risk", etc.)

</details>

<details>
<summary> <strong>Step 5: Visualize and Analyze</strong></summary>

- Analyze the distribution of customers across segments

- Create visual dashboards to support interpretation

</details>

<details>
<summary> <strong>Step 6: Business Recommendations</strong></summary>

- Suggest which RFM dimension (R, F, or M) should be prioritized based on SuperStore's retail model

- Provide actionable insights to the Marketing and Sales departments

</details>

## üìà Analysis & Results

[**Link to code**](https://colab.research.google.com/drive/1XYqTkaKBxrIhCmbzMfv44dSsYL2dLOzh?usp=sharing)

### I. EDA

#### ‚úÖ 1. Import Packages

```ruby
!pip install pandas==2.1.4 ydata-profiling==4.6.4
!pip install squarify
!pip install pydantic-settings
```

```ruby
import pandas as pd
from ydata_profiling import ProfileReport
import seaborn as sns
import numpy as np

import matplotlib.pyplot as plt
import squarify    # algorithm for treemap
```

#### ‚úÖ 2. Understand about the data

##### 2.1. Load Dataset

```ruby
path = '/content/drive/MyDrive/DAC 1 on 1 /Python/Project_3_ecommerce_retail/Dataset'

import os
os.chdir(path)

df = pd.read_excel('ecommerce retail.xlsx', sheet_name = 'ecommerce retail')
df.head()
```

<img width="1121" height="277" alt="image" src="https://github.com/user-attachments/assets/0a63739a-7230-441c-8c69-97ade8cfb71f" />

##### 2.2. Get infor about data type & data value

<img width="1121" height="430" alt="image" src="https://github.com/user-attachments/assets/6b1a484d-7230-4bbc-bcfd-b4ee18772429" />

<img width="1121" height="580" alt="image" src="https://github.com/user-attachments/assets/627b0a55-168a-4493-8c14-d132f2f278f2" />

##### 2.3. Using ProfileReport to Understand more about Category Data Type

```ruby
# profile gi√∫p detect s√¢u h∆°n (c√°c c·ªôt mang t√≠nh ch·∫•t category, v√¢n v√¢n)
profile = ProfileReport(df)
profile
```

<img width="1121" height="642" alt="image" src="https://github.com/user-attachments/assets/37870be1-5317-4d13-afab-66c137fd406b" />

##### 2.4. Identify the Reason for Unreasonable Data Values (Quantity < 0)

<img width="1121" height="386" alt="image" src="https://github.com/user-attachments/assets/51a21006-3a52-40c6-ac8d-54901be10d54" />

<img width="1121" height="455" alt="image" src="https://github.com/user-attachments/assets/923bce07-83b8-41d1-8149-2bb5ec8d136f" />

<img width="1121" height="287" alt="image" src="https://github.com/user-attachments/assets/aa796941-a1b6-4b29-a8b1-a98fcb087e7d" />

##### 2.5. Identify the Reason for Unreasonable Data Values (Price < 0)

<img width="1121" height="286" alt="image" src="https://github.com/user-attachments/assets/fb0a9a8b-7a50-4b4c-8673-3aff3c63b00f" />

##### 2.6. Handling Invalid Data Types and Data Values

<img width="1121" height="511" alt="image" src="https://github.com/user-attachments/assets/d3790d53-623f-4e94-a11f-d6e5d432d741" />

<img width="1121" height="697" alt="image" src="https://github.com/user-attachments/assets/54fa9a7a-12c3-4339-adf2-619b184183fd" />

#### ‚úÖ 3. Handling Missing Values and Duplicates

##### 3.1. 




























## üí° Key Takeaways

- RFM analysis helps businesses understand customer behavior and lifetime value.

- Segmenting customers enables tailored marketing strategies, better resource allocation, and improved customer retention.

- Automation via Python ensures scalability as the company grows.


